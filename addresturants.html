<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

    <!-- <link href="test.css" rel="stylesheet" /> -->
    <link href="add.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <link href="style-main.css" rel="stylesheet" />
   
    <title>Add Resturants</title>
   
</head>
<body>
  

    <!-- navbaar ------------------------------------------------------------->
    
    <header>
        <nav>
            <nav class="contanier">
                <img class="logo" src="#" alt="">
                <i id="btn-menu" class="fa-solid fa-bars"></i>
                <div class="nav-links">
                    <a href="index-main.html" class="active">Home</a>
                    <a href="index-main.html#about">About</a>
                    <a href="index-main.html#services">Services</a>
                    <a href="#">Contact</a>
                    <a href="index-main.html#Portfolio">restaurant</a>
                    <a href="index.html" >logout</a>
                </div>
            </nav>
    </header>

      <div class="container">
        <div class="add-rest">
            <i id="close" class="fa-solid fa-xmark"></i>
            <h2>Add Resturant</h2>
            <form action="" id="form">
      <div class="inp">
        <i class="fa-solid fa-user"></i>
        <input type="text" placeholder="Name"  id="name" name="name" required >
    </div>
    <div class="inp">
        <input type="file" id="logo" name="logo" required>
    </div>
    <div class="inp">
        <i class="fa-solid fa-user"></i>
        <input type="text" placeholder="address" id="address" name="address" required>
    </div>
    <div class="inp">
        <i class="fa-solid fa-user"></i>
        <input type="text" placeholder="location" id="location" name="location"required>
    </div>
    <div class="inp">
        <i class="fa-solid fa-user"></i>
        <input type="number" placeholder="phone" id="phone" name="phone"required>
    </div>

<div class="inp">
        <button type="submit">Add Restaurant</button>

</div>
</form>
</div>
</div>
        

        
        
    
<!-- <script>

    let closee = document.getElementById('close');
    let add = document.querySelector('.add-rest');
    let btnadd = document.querySelector('.btnadd');

    btnadd.onclick = () =>{
        add.classList.add('active')
    }
    closee.onclick = () =>{
        add.classList.remove('active')
    }

</script> -->
 <!-- <script >

    

    (function() {
    const form = document.getElementById('form');
    form.addEventListener('submit', function(e) {
    // Prevent default behavior
    e.preventDefault();
    // Create payload as new FormData object

    const payload = new FormData(form);
    // Post the payload using Fetch
    fetch('http://127.0.0.1:8000/products/resturants/', {
    method: 'POST',
    body: payload,
    })
   
    .then(response => {
        if (response.ok) {
            alert('success your Restaurant has been added.');

          window.location.href = 'categery.html'; // redirect to success page
        } else {
          throw new Error('Network response was not ok.');
        }
      })
    .then(res => res.json())
    .then(data => console.log(data))
    })
    })()
    
</script>   
 -->

 <script>(function() {
    const form = document.getElementById('form');
    form.addEventListener('submit', function(e) {
      e.preventDefault();
  
      const fileInput = document.getElementById('logo');
      const file = fileInput.files[0];
  
      const payload = new FormData(form);
      payload.append('file', file); // Append the file to the payload
  
      // Get the authentication token from localStorage
      const token = localStorage.getItem('token');
  
      // Check if the user is authenticated
      if (token) {
        // Include the authentication token in the request headers
        const headers = {
          'Authorization': `Token ${token}`,
        };
  
        // Post the payload using Fetch, including the headers
        fetch('http://127.0.0.1:8000/products/resturants/', {
          method: 'POST',
          body: payload,
          headers: headers
        })
          .then(response => {
            if (response.ok) {
              alert('Success! Your comment has been posted.');
              window.location.href = 'list_rest.html'; // redirect to success page
        } else {
              throw new Error('Network response was not ok.');
            }
          })
          .catch(error => {
            console.error(error);
          });
      } else {
        alert('Please log in to post a comment.');
      }
    });
  })();
  </script>
    
</body>

 
</html>