<style>
  .add-rest {
    position: relative;
    width: 400px;
    max-width: 100%;
    margin: 0 auto;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    margin-top: 80%;
    margin-left: 80%;

  
  }

  .add-rest h2 {
    margin-bottom: 20px;
    font-size: 20px;
    text-align: center;
  }

  .add-rest .inp {
    position: relative;
    margin-bottom: 20px;
  }

  .add-rest .inp i {
    position: absolute;
    top: 50%;
    left: 15px;
    transform: translateY(-50%);
    color: #999;
  }

  .add-rest .inp input {
    width: 100%;
    padding: 10px 15px 10px 35px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 14px;
  }

  .add-rest button[type="submit"] {
    display: block;
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 5px;
    background-color: #007bff;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
  }

  .add-rest button[type="submit"]:hover {
    background-color: #0056b3;
  }
</style>

<div class="add-rest">
  <i id="close" class="fa-solid fa-xmark"></i>
  <h2>Make Comment</h2>
  <form action="" id="form">
    <div class="inp">
      <i class="fa-solid fa-user"></i>
      <input type="text" placeholder="Enter comment" id="text" name="text" required>
    </div>

    <button type="submit">Send</button>
  </form>
</div>




<!-- 
<script>
  (function() {
    const form = document.getElementById('form');
    form.addEventListener('submit', function(e) {
      e.preventDefault();

       var formValues = new FormData(form)

       var text = formValues.get("text");

      var payload = {"text": text}

      // Get the authentication token from localStorage
      const token = localStorage.getItem('token')

      // Check if the user is authenticated
      if (token) {
        // Include the authentication token in the request headers
        const headers = {
          'Authorization': `Token ${token}`,
          'Content-Type': 'application/json'
        };
        console.log(payload)

        // Post the payload using Fetch, including the headers
        fetch('http://localhost:8000/accounts/comments/', {
          method: 'POST',
          body: JSON.stringify(payload),
          headers: headers
        })
        
          .then(response => {
            if (response.ok) {
              alert('Success! Your comment has been posted.');
              // Do something after successful posting
            } else {
              throw new Error('Network response was not ok.');
            }
          })
          .catch(error => {
            console.error(error);
          });
      } else {
        alert('Please log in to post a comment.');
      }
    });
  })();
</script>
 -->

 <script>
  (function() {
    const form = document.getElementById('form');
    form.addEventListener('submit', function(e) {
      e.preventDefault();


       const payload = new FormData(form);

       // Iterating over the entries of the FormData object
       for (const [key, value] of payload.entries()) {
         // Storing the key-value pair in the object
         payload[key] = value;
       }

      // Get the authentication token from localStorage
      const token = localStorage.getItem('token')

      // Check if the user is authenticated
      if (token) {
        // Include the authentication token in the request headers
        const headers = {
          'Authorization': `Token ${token}`,
          'Content-Type': 'application/json'
        };
        console.log(payload)

        // Post the payload using Fetch, including the headers
        fetch('http://localhost:8000/accounts/comments/', {
          method: 'POST',
          body: JSON.stringify(payload),
          headers: headers
        })
        
          .then(response => {
            if (response.ok) {
              alert('Success! Your comment has been posted.');
              // Do something after successful posting
            } else {
              throw new Error('Network response was not ok.');
            }
          })
          .catch(error => {
            console.error(error);
          });
      } else {
        alert('Please log in to post a comment.');
      }
    });
  })();
</script>














 
